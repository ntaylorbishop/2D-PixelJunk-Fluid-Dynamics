#include "Game/TheGame.hpp"
#include "Engine/General/Core/BeirusEngine.hpp"
#include "Engine/Renderer/Renderer/BeirusRenderer.hpp"


TheGame* TheGame::s_theGame = nullptr;


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//STATIC INIT DESTROY
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
STATIC void TheGame::Initialize() {

	s_theGame = new TheGame();
	BeirusEngine::RegisterUpdateCallback(MakeDelegate(s_theGame, &TheGame::Update));
}


//---------------------------------------------------------------------------------------------------------------------------
STATIC void TheGame::Shutdown() {

	BeirusEngine::UnregisterUpdateCallback(MakeDelegate(s_theGame, &TheGame::Update));
	delete s_theGame;
}


//---------------------------------------------------------------------------------------------------------------------------
STATIC void TheGame::Render() {
	s_theGame->InternalRender();
}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//STRUCTORS INITIALIZATION
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
TheGame::TheGame() {

	BeirusRenderer::ClearScreen(RGBA(0.1f, 0.1f, 0.1f, 1.f));
	m_camera = Camera2D(Vector2::ZERO, 0.f, AABB2(Vector2(-100.f), Vector2(100.f)), 10.f, 16.f / 9.f);
}


//---------------------------------------------------------------------------------------------------------------------------
TheGame::~TheGame() {

}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//UPDATE
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
void TheGame::Update(float deltaSeconds) {

}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//RENDER
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
void TheGame::InternalRender() const {

	BeirusRenderer::ClearColor();
	BeirusRenderer::DrawCircle(m_camera, RGBA::GREEN, Vector3::ZERO, 0.2f);
	int a = 0;
}